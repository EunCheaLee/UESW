<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>UESW êµí†µì•ˆì „í˜ì´ì§€</title>
	<link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="stylesheet" th:href="@{/css/fragments.css}">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<script type="text/javascript"
		src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=(í‚¤)&autoload=false&libraries=services">
		</script>
	<script src="/js/fragments.js" defer></script>
	<script src="/js/home.js" defer></script>
	<script src="/js/env.js"></script>
	<script th:src="@{/js/session.js}" defer></script>
	<!--javascript í‚¤-->
</head>

<body>
	<!-- ë„·ë°” -->
	<div th:replace="~{fragments/nav :: mainNav}"></div>

	<div class="home-container">

		<div class="scrollBox">
			<div class="scroll_ani">
				<p>Scroll Here !</p>
			</div>

			<div class="home-section" id="home-content0">
				<article class="police_main_info flex flex_column" style="width: 901px; color: #fff;">
					<span class="medium_font" style="font-size: 34px;">ì„œìš¸ê²½ì°°ì²­</span>
					<h2 class="bold_font" style="font-size: 51px;">êµí†µì •ë³´ì„¼í„°</h2>
					<p style="font-size: 28px;">êµí†µì •ë³´ì„¼í„°ëŠ” êµí†µì•ˆì „ ë° ì›í™œí•œ ì†Œí†µ í™•ë³´ë¥¼ ìœ„í•´<br>
						ì‹ í˜¸ìš´ì˜, CCTV ê´€ì œë¥¼ í†µí•œ ë¬´ì„  ì§€ë ¹ ë° êµí†µì •ë³´ ì œê³µ ë“±ì„<br>
						ìˆ˜í–‰í•˜ëŠ” 'ì»¨íŠ¸ë¡¤ íƒ€ì›Œ' ì—­í• ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
					<button class="btn_go medium_font" onclick="scrollToBottom()">ì„¼í„°ì†Œê°œ</button>
				</article>

				<div class="triangle"></div>

				<div class="scroll-wrapper">
					<div class="scroll-track">
						<img src="/img/traffic.png" alt="êµí†µ ì´ë¯¸ì§€">
						<img src="/img/traffic.png" alt="êµí†µ ì´ë¯¸ì§€">
						<img src="/img/traffic.png" alt="êµí†µ ì´ë¯¸ì§€">
						<img src="/img/traffic.png" alt="êµí†µ ì´ë¯¸ì§€">
					</div>
				</div>
			</div>

			<div class="home-section" id="home-content1">
				<iframe src="/weather"></iframe>
			</div>

			<div class="home-section" id="home-content2">
				<div class="navigation">
					<div id="navi-wrapper">
						<div id="search-controls">
							<button class="swap-button" onclick="swapPlaces()">â†•</button>
							<div class="input-row">
								<div class="input-group">
									<div>
										<input type="text" id="start" placeholder="ì¶œë°œì§€ ì…ë ¥" autocomplete="off">
										<div id="start-list" class="autocomplete-list"></div>
									</div>
									<div>
										<input type="text" id="end" placeholder="ë„ì°©ì§€ ì…ë ¥" autocomplete="off">
										<div id="end-list" class="autocomplete-list"></div>
									</div>
								</div>
								<div class="button-group">
									<button onclick="setCurrentLocation()">í˜„ì¬ìœ„ì¹˜</button>
									<button id="search-btn" onclick="findRoutes()" disabled>ê²€ìƒ‰</button>
								</div>
							</div>
							<div class="start-time">
								<label>ì¶œë°œì‹œê°„: <input type="time" id="departureTime"></label>
							</div>
						</div>
						<div id="result">
							<div class="route-card">
								<div class="route-title">ê²½ë¡œ íƒìƒ‰ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”</div>
								<div class="route-info">ì¶œë°œì§€ì™€ ë„ì°©ì§€ë¥¼ ì…ë ¥í•œ ë’¤ <strong>ê²€ìƒ‰</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</div>
							</div>
						</div>

						<div id="fav-btn-wrapper">
							<button onclick="addToFavorites()"><i class="bi bi-star-fill"></i></button>
						</div>

						<div class="section">
							<h3>ìµœê·¼ ê²€ìƒ‰ ê²½ë¡œ</h3>
							<div id="history-list" class="card">ê¸°ë¡ ì—†ìŒ</div>
						</div>
						<div class="section">
							<h3>ì¦ê²¨ì°¾ê¸° ëª©ë¡</h3>
							<div id="favorite-list" class="card">ì¦ê²¨ì°¾ê¸° ì—†ìŒ</div>
						</div>
					</div>

					<div id="map-wrapper">
						<div id="map"></div>
						<div id="loading">ê²½ë¡œë¥¼ íƒìƒ‰ ì¤‘ì…ë‹ˆë‹¤...</div>
						<div id="map-click-assign">
							<button onclick="setClickedPoint('start')">ì¶œë°œì§€ë¡œ ì§€ì •</button>
							<button onclick="setClickedPoint('end')">ë„ì°©ì§€ë¡œ ì§€ì •</button>
						</div>
					</div>
				</div>
			</div>

			<div class="home-section" id="home-content3">
				<main class="main-content">
					<h2 id="main-title">UESW</h2>
					<h2 id="sub-title">User
						Enabled<br>Safety Web</h2>
					<div>
						<div class="intro-container">
							<div class="intro-box">
								<p class="desc">ì‚¬ìš©ì ë§ì¶¤í˜•<br /> ì•ˆì „ ì„œë¹„ìŠ¤ í†µí•© ì œê³µ</p>
								<p>
									ì„œìš¸ì‹œë¯¼ì˜ ìƒí™œ ì•ˆì „ê³¼ êµí†µ í¸ì˜ë¥¼ ìœ„í•´<br>
									ê¸°ìƒÂ·êµí†µ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì‹œê°„ ì •ë³´ë¥¼<br>
									í†µí•© ì œê³µí•˜ëŠ” ìŠ¤ë§ˆíŠ¸ í”Œë«í¼ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.<br>
									ì‚¬ìš©ì ìœ„ì¹˜ì™€ ê´€ì‹¬ ì •ë³´ë¥¼ ë°˜ì˜í•´<br>
									ë§ì¶¤í˜• ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
								</p>
							</div>

							<div class="intro-box">
								<p class="desc">ìŠ¤ë§ˆíŠ¸ êµí†µ í™˜ê²½ ì‹¤í˜„</p>
								<p>
									ê¸°ì˜¨Â·ê°•ìˆ˜ëŸ‰Â·êµí†µ í˜¼ì¡ë„Â·ëŒë°œ ìƒí™© ë“±ì„<br>
									í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ì‹œê°í™” ê¸°ëŠ¥ì„ í†µí•´<br>
									ì‹œë¯¼ ëˆ„êµ¬ë‚˜ ì‰½ê³  ë¹ ë¥´ê²Œ<br>
									ì„œìš¸ì‹œ êµí†µ ìƒí™©ì„ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡<br>
									ì§€ì›í•©ë‹ˆë‹¤.
								</p>
							</div>
						</div>
				</main>
				<div class="contact-dropdown">
					<button class="dropdown-toggle" onclick="toggleDropdown()">
						<a>Contact Us</a> <span id="dropdownArrow"> â–¶ </span>
					</button>

					<ul class="dropdown-menu" id="contactMenu">
						<a>ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš”! â–¼</a>
						<li>
							<span class="email" data-tooltip="íŒ€ì¥, ê°œë°œì, ì·¨ë¯¸: ìš”ë¦¬" onclick="openGmail('ecl0527@naver.com')">
								<span class="icon">ğŸŒ</span>
								<span class="email-text"><i class="bi bi-emoji-sunglasses-fill"></i> ì´ì€ì±„<br><i
										class="bi bi-envelope-at-fill"></i> ecl0527@naver.com<br><i
										class="bi bi-github"></i> EunCheaLee</span>
							</span>
						</li>
						<li>
							<span class="email" data-tooltip="íŒ€ì›, ê°œë°œì, ì·¨ë¯¸: ê²Œì„"
								onclick="openGmail('sinhyeonu56@gmail.com')">
								<span class="icon">ğŸ®</span>
								<span class="email-text"><i class="bi bi-emoji-sunglasses-fill"></i> ì‹ í˜„ìš°<br><i
										class="bi bi-envelope-at-fill"></i> sinhyeonu56@gmail.com<br><i
										class="bi bi-github"></i> mad0526</span>
							</span>
						</li>
						<li>
							<span class="email" data-tooltip="íŒ€ì›, ê°œë°œì, ì·¨ë¯¸: ì—¬í–‰"
								onclick="openGmail('joonick90301@gmail.com')">
								<span class="icon">ğŸ‘½</span>
								<span class="email-text"><i class="bi bi-emoji-sunglasses-fill"></i> ì´ì¤€ìµ<br><i
										class="bi bi-envelope-at-fill"></i> joonick90301@gmail.com<br><i
										class="bi bi-github"></i> dlwnsdlr0301</span>
							</span>
						</li>
						<li>
							<span class="email" data-tooltip="íŒ€ì›, ê°œë°œì, ì·¨ë¯¸: ë…ì„œ"
								onclick="openGmail('yjitstudy@gmail.com')">
								<span class="icon">ğŸ¦„</span>
								<span class="email-text"><i class="bi bi-emoji-sunglasses-fill"></i> ìµœìœ¤ì£¼<br><i
										class="bi bi-envelope-at-fill"></i> yjitstudy@gmail.com<br><i
										class="bi bi-github"></i> Jootori</span>
							</span>
						</li>
					</ul>
				</div>
			</div>
			<div class="triangle2"></div>
			<div class="traffic-pic">
				<img src="img/container4.png" />
			</div>

			<div class="dot-nav" id="dotNav">
				<div class="dot" data-index="0"></div>
				<div class="dot" data-index="1"></div>
				<div class="dot" data-index="2"></div>
				<div class="dot" data-index="3"></div>
			</div>

			<div th:replace="~{fragments/top-btn :: top-btn}"></div>
		</div>
	</div>
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const scrollBox = document.querySelector('.scroll_ani');

			if (scrollBox) {
				// ë‚´ë¶€ ìŠ¤í¬ë¡¤ì„ í—ˆìš©í•˜ë„ë¡ ì„¤ì •
				scrollBox.style.overflow = 'auto';

				// íœ  ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
				scrollBox.addEventListener('wheel', (e) => {
					// ê¸°ë³¸ íœ  ë™ì‘ì„ ë§‰ì§€ ì•ŠìŒ
					const direction = e.deltaY > 0 ? 1 : -1;
					console.log(`Scroll direction: ${direction}`);

					// í˜ì´ì§€ ìŠ¤í¬ë¡¤
					window.scrollBy({
						top: direction * window.innerHeight,
						behavior: 'smooth'
					});
				}, {passive: true}); // passive: trueë¡œ ì„¤ì •í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ í—ˆìš©
			} else {
				console.warn('.scroll_ani ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
			}
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const toggleCheckbox = document.getElementById("toggle");
			const darkModeClassList = [
				document.body,
				document.querySelector(".sidebar"),
				document.getElementById("main-content"),
				document.querySelector(".popup-content")
			];

			// ì´ˆê¸° ìƒíƒœ ì„¤ì •
			const savedMode = localStorage.getItem("dark-mode");
			if (savedMode === "true") {
				toggleCheckbox.checked = true;
				darkModeClassList.forEach(el => el?.classList.add("dark-mode"));
			}

			// ìƒíƒœ ë³€ê²½ ì‹œ ì´ë²¤íŠ¸
			toggleCheckbox.addEventListener("change", () => {
				const isDark = toggleCheckbox.checked;
				darkModeClassList.forEach(el => el?.classList.toggle("dark-mode", isDark));
				localStorage.setItem("dark-mode", isDark);
			});
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const dots = document.querySelectorAll('.dot');
			const container = document.querySelector('.scrollBox');
			const sections = document.querySelectorAll('.home-section');

			// í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
			dots.forEach((dot, idx) => {
				dot.addEventListener('click', () => {
					sections[idx].scrollIntoView({behavior: 'smooth'});
				});
			});

			// í˜„ì¬ í™”ë©´ì— ê°€ì¥ ê°€ê¹Œìš´ ì„¹ì…˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ dot ê°±ì‹ 
			function updateActiveDot() {
				let closestIndex = 0;
				let minDiff = Infinity;
				sections.forEach((section, index) => {
					const rect = section.getBoundingClientRect();
					const diff = Math.abs(rect.top); // í™”ë©´ ìƒë‹¨ê³¼ì˜ ê±°ë¦¬
					if (diff < minDiff) {
						minDiff = diff;
						closestIndex = index;
					}
				});

				dots.forEach(dot => dot.classList.remove('active'));
				dots[closestIndex]?.classList.add('active');
			}

			// ìŠ¤í¬ë¡¤ ì‹œ dot ìƒíƒœ ê°±ì‹ 
			window.addEventListener('scroll', updateActiveDot);

			// ì´ˆê¸° ê°•ì¡°
			dots[0].classList.add('active');
		});
	</script>
	<script>
		function toggleDropdown() {
			const menu = document.getElementById('contactMenu');
			const arrow = document.getElementById('dropdownArrow');

			const isOpen = menu.style.display === 'block';
			menu.style.display = isOpen ? 'none' : 'block';
			arrow.classList.toggle('rotated', !isOpen);
		}
		function openGmail(email) {
			const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=${email}`;
			window.open(gmailUrl, '_blank', 'width=600,height=700,toolbar=no,menubar=no,scrollbars=yes,resizable=yes');
		}
	</script>

	<script>
		function scrollToBottom() {
			const lastSection = document.getElementById('home-content3');  // í˜ì´ì§€ ë§¨ ì•„ë˜ ì„¹ì…˜
			lastSection.scrollIntoView({behavior: 'smooth'});
		}
	</script>


</body>

</html>
