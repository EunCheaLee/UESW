<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="stylesheet" th:href="@{/css/sidebar.css}">
	<script src="/js/home.js" defer></script>
	<script th:src="@{/js/session.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" 
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=decabf1a98a2b15f0b977ba76ec9095c&autoload=false">
    </script>
</head>

<body>
<!--		<header>
			<table class="main-header">
				<tr class="main-info">
					<td class="main-news">
						<iframe></iframe>
					</td>
					<td class="main-sns">
						<img src=""/>
						<img src=""/>
						<img src=""/>
					</td>
				</tr>
			</table>
		</header>-->
		
		<!-- 넷바 -->
		    <nav class="navbar">
		      <div class="container-fluid">
		          <!-- 브랜드 영역 -->
		          <a th:href="@{/home}" class="navbar-brand">
		              <img href="#" src="/img/Logo.png" alt="Logo" class="logo">
		          </a>

		          <!-- 메뉴 -->
		          <ul class="menu">
		              <li>
		                  <a href="#">교통상황</a>
		                  <ul class="submenu">
		                      <li><a th:href="@{/opendata/}">교통정보</a></li>
		                      <li><a th:href="@{/sidebar(section='traffic')}">돌발상황</a></li>
		                      <li><a th:href="@{/sidebar(section='weather')}">기상정보</a></li>
		                  </ul>
		              </li>
		              <li>
		                  <a href="#">교통자료</a>
		                  <ul class="submenu">
		                      <li><a href="#">교통사고<br>데이터</a></li>
		                      <li><a th:href="@{/sidebar(section='cctv')}">CCTV</a></li>
		                  </ul>
		              </li>
		              <li><a th:href="@{/board}">게시판</a></li>
		              <li>
		                  <a th:href="@{/info}">회원정보</a>
		                  <ul class="submenu">
		                      <li><a th:href="@{/login}">로그인<br/>/회원가입</a></li>
		                      <li><a href="@{/}">회원정보 찾기</a></li>
		                  </ul>
		              </li>
		          </ul>

		          <!-- 로그인 아이콘 -->
		          <a th:href="@{/login}" class="login-button" >
		              <img id="login-img" src="/img/Login.png" alt="Login Icon" class="icon2">
		              <span id="login-txt" th:text="${session.loggedInUser != null ? 'Logout' : 'Login'}"></span>
		          </a>
		      </div>
		  </nav>
		  
		  <!-- 고정 사이드바 -->
		    <div class="sidebar">
		      
		      <!-- Font Awesome CDN 추가 -->
		      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		    <ul>
		      <li>
		        <button type="button" class="sidebar-button">
		          <a th:href="@{/sidebar(section='traffic')}">
		  			<i class="fa-solid fa-car"></i> <br>교통<br>속보
		  		</a>
		        </button>
		      </li>
		      <li>
		        <button type="button" class="sidebar-button">
		  			<a th:href="@{/sidebar(section='weather')}">
		  				<i class="fa-solid fa-cloud-sun"></i> <br>기상<br>정보
		  			</a>
		  		</button>
		      </li>
		      <li>
		        <button type="button" class="sidebar-button" >
		  		<a th:href="@{/sidebar(section='cctv')}">
		  			<i class="fa-solid fa-video"></i> <br>CCTV<br>검색
		  		</a>
		        </button>
		      </li>
		      <li>
		        <button type="button" class="sidebar-button" >
					<a th:href="@{/info}">
		          	<i class="fa-solid fa-user"></i> <br>마이<br>페이지
		        </button>
		      </li>
		      <li>
		        <button type="button" class="sidebar-button" >
		  		<a th:href="@{/sidebar(section='settings')}">
		  	        <i class="fa-solid fa-gear"></i> <br>설정
		  		</a>
		        </button>
		      </li>
		    </ul>
		<!-- 사이드바 스크립트 -->
		<script src="/js/sidebar.js"></script>
	    </div>
		
		
		
	<div class="home-container">
		<div class="scrollBox">
			<div class="scroll_ani">
			    <p>Scroll Here !</p>
			</div>
		

	    <div class="home-content1"> 
			  <iframe src="monthly" width="80%" height="700px"style="border:none;"></iframe>
		</div>
		<div class="home-content2">
			<div class="map-button">
				<button onclick="setOverlayMapTypeId('traffic')">교통정보 보기</button> 
				<button onclick="setOverlayMapTypeId('roadview')">로드뷰 도로정보 보기</button> 
				<button onclick="setOverlayMapTypeId('terrain')">지형정보 보기</button>
				<button onclick="setOverlayMapTypeId('use_district')">지적편집도 보기</button>
				<button onclick="setOverlayMapTypeId('roadmap')">일반지도 보기</button>
			</div>
		    <!-- 지도 -->
			<div id="home-map" style="background-color: rgb(71, 62, 52);"> </div>
		</div>
		<div class="home-content3">
		</div>
		
		<div>
			<footer class="main-footbar">
			</footer>
		</div>
		
			<script>
				kakao.maps.load(function () {
				    var container = document.getElementById('home-map');
				    var options = {
				        center: new kakao.maps.LatLng(37.570715, 126.985324),
				        level: 3
				    };
				    window.map = new kakao.maps.Map(container, options);
					
					// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
					var zoomControl = new kakao.maps.ZoomControl();
					map.addControl(zoomControl, kakao.maps.ControlPosition.BOTTOMLEFT);
					
				});
				// 지도에 추가된 지도타입정보를 가지고 있을 변수입니다
				var currentTypeId;

				// 버튼이 클릭되면 호출되는 함수입니다
				function setOverlayMapTypeId(maptype) {
				    var changeMaptype;
				    
				    // maptype에 따라 지도에 추가할 지도타입을 결정합니다
				    if (maptype === 'traffic') {            
				        
				        // 교통정보 지도타입
				        changeMaptype = kakao.maps.MapTypeId.TRAFFIC;     
				        
				    } else if (maptype === 'roadview') {        
				        
				        // 로드뷰 도로정보 지도타입
				        changeMaptype = kakao.maps.MapTypeId.ROADVIEW;    

				    } else if (maptype === 'terrain') {
				        
				        // 지형정보 지도타입
				        changeMaptype = kakao.maps.MapTypeId.TERRAIN;    

				    } else if (maptype === 'use_district') {
				        
				        // 지적편집도 지도타입
				        changeMaptype = kakao.maps.MapTypeId.USE_DISTRICT;           
				    } else if (maptype === 'roadmap') {
				        changeMaptype = kakao.maps.MapTypeId.ROADMAP; 
				    }
				    
				    // maptype에 해당하는 지도타입을 지도에 추가합니다
				    map.addOverlayMapTypeId(changeMaptype);
				    
				    // 지도에 추가된 타입정보를 갱신합니다
				    currentTypeId = changeMaptype;        
				}
			</script>
			
			<script>
				document.addEventListener('DOMContentLoaded', () => {
				    const scrollBox = document.querySelector('.scroll_ani');

				    if (scrollBox) {
				        // 내부 스크롤을 허용하도록 설정
				        scrollBox.style.overflow = 'auto';

				        // 휠 스크롤 이벤트 처리
				        scrollBox.addEventListener('wheel', (e) => {
				            // 기본 휠 동작을 막지 않음
				            const direction = e.deltaY > 0 ? 1 : -1;
				            console.log(`Scroll direction: ${direction}`);

				            // 페이지 스크롤
				            window.scrollBy({
				                top: direction * window.innerHeight,
				                behavior: 'smooth'
				            });
				        }, { passive: true }); // passive: true로 설정하여 기본 동작을 허용
				    } else {
				        console.warn('.scroll_ani 요소를 찾을 수 없습니다!');
				    }
				});
			</script>
		</div>
	</div>
  </body>
</html>