<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/board.css}"/>
    <script th:src="@{/js/board.js}" defer></script>
</head>
<body>
    <!-- 글쓰기 폼 -->
    <form th:action="@{/board/save}" method="post" th:object="${board}">
        <table class="form-container"> 
            <tr><td><h2>글쓰기</h2></td></tr>
            <tr height="10px"><td></td></tr>
            <tr>
                <td class="header">제목</td>
            </tr>
            <tr height="5px"><td></td></tr>
            <tr><td><input type="text" th:field="*{title}" placeholder="제목을 입력하세요" name="title"></td></tr>
            <tr height="10px"><td></td></tr>
            <tr><td class="header">본문</td></tr>
            <tr height="5px"><td></td></tr>
            <tr><td><textarea placeholder="내용을 입력하세요" th:field="*{content}" name="content"></textarea></td></tr>
            <tr height="10px"><td></td></tr>

            <!-- 비밀번호 입력 필드 추가 -->
            <tr>
                <td class="header">비밀번호</td>
            </tr>
            <tr height="5px"><td></td></tr>
            <tr><td><input type="password" th:field="*{user.password}" placeholder="비밀번호를 입력하세요" name="password"></td></tr>
            <tr height="10px"><td></td></tr>

            <tr align="right"><td><input type="submit" value="등록" onclick="alert('작성 완료!')"></td></tr>
        </table>
    </form>

    <!-- 게시글 목록 출력 -->
    <div th:each="board : ${boards}">
        <div th:style="'margin-left: ' + ${board.depth * 20} + 'px'">
            <div th:text="${board.title}"></div>
            <div th:text="${board.content}"></div>
        </div>

        <!-- 답글이 있는 경우, 답글을 출력 -->
        <div th:if="${board.replyNum > 0}">
            <p th:text="'답글 수: ' + ${board.replyNum}"></p>
            <ul>
                <li th:each="reply : ${board.replies}">
                    <div th:style="'margin-left: ' + ${reply.depth * 20} + 'px'">
                        <div th:text="${reply.title}"></div>
                        <div th:text="${reply.content}"></div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>
